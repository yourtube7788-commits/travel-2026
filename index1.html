<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>極光行旅 Aurora Planner</title>
    
    <!-- iOS Web App 設定 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="極光行旅">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3063/3063205.png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 設定 Tailwind 安全區域 & 自定義動畫 -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            padding: {
              'safe-top': 'env(safe-area-inset-top)',
              'safe-bottom': 'env(safe-area-inset-bottom)',
            },
            animation: {
              'fade-in': 'fadeIn 0.2s ease-out',
              'slide-up': 'slideUp 0.3s ease-out',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              slideUp: {
                '0%': { transform: 'translateY(100%)' },
                '100%': { transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>

    <!-- Import Map -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1"
      }
    }
    </script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        body { -webkit-tap-highlight-color: transparent; }
        /* 避免 iOS 輸入框放大 */
        input, select, textarea { font-size: 16px !important; }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 h-[100dvh] w-screen overflow-hidden">
    <div id="root" class="h-full w-full"></div>

    <!-- 主程式邏輯 -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
          Calendar, MapPin, DollarSign, CloudSun, CloudSnow, Sun, 
          Clock, Plus, Trash2, Hotel, Car, Navigation, CloudRain,
          Edit2, X, Save, MoreVertical, ChevronRight
        } from 'lucide-react';

        // --- 初始資料 ---
        const INITIAL_ITINERARY = [
          {
            id: 1,
            date: '2026-03-27',
            dayOfWeek: '五',
            location: 'Fairbanks',
            accommodation: 'Minnie Street B&B',
            transport: '租車 (Hertz)',
            weather: null,
            activities: [
              { id: 'a1', time: '14:00', title: '抵達 Fairbanks 機場', note: '取車', type: 'transport' },
              { id: 'a2', time: '16:00', title: 'Pioneer Park', note: '只有夏天有開, 但可拍照', type: 'sightseeing' },
              { id: 'a3', time: '18:00', title: '晚餐', note: '泰式料理', type: 'food' },
              { id: 'a4', time: '22:00', title: '追極光', note: '往主要公路開', type: 'highlight' }
            ]
          },
          {
            id: 2,
            date: '2026-03-28',
            dayOfWeek: '六',
            location: 'North Pole',
            accommodation: 'Minnie Street B&B',
            transport: '租車',
            weather: null,
            activities: [
              { id: 'a5', time: '10:00', title: '聖誕老人屋', note: '寄明信片', type: 'sightseeing' },
              { id: 'a6', time: '13:00', title: '阿拉斯加大學博物館 (UAF)', note: '門票 $10', type: 'sightseeing' },
              { id: 'a7', time: '15:00', title: '莫里斯湯普森文化中心', note: '領取極光證書', type: 'sightseeing' },
              { id: 'a8', time: '20:00', title: 'Chena Hot Springs', note: '泡溫泉看極光', type: 'highlight' }
            ]
          }
        ];

        const INITIAL_EXPENSES = [
          { id: 1, item: 'UAF 博物館門票', amount: 10, currency: 'USD', category: '票券', date: '2026-03-28' },
          { id: 2, item: '租車費用 (3天)', amount: 298, currency: 'USD', category: '交通', date: '2026-03-27' },
        ];

        // --- 通用 Modal 元件 ---
        const Modal = ({ isOpen, onClose, title, children }) => {
          if (!isOpen) return null;
          return (
            <div className="fixed inset-0 z-50 flex items-end justify-center sm:items-center bg-black/50 backdrop-blur-sm animate-fade-in">
              <div className="bg-white w-full max-w-md rounded-t-2xl sm:rounded-2xl p-6 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto">
                <div className="flex justify-between items-center mb-4">
                  <h3 className="text-lg font-bold text-gray-800">{title}</h3>
                  <button onClick={onClose} className="p-1 rounded-full hover:bg-gray-100"><X className="w-5 h-5 text-gray-500" /></button>
                </div>
                {children}
              </div>
            </div>
          );
        };

        // --- 主應用 ---
        function TravelPlanner() {
          const [activeTab, setActiveTab] = useState('itinerary');
          
          // --- State: 資料 ---
          const [itinerary, setItinerary] = useState(() => {
            try { return JSON.parse(localStorage.getItem('aurora_itinerary')) || INITIAL_ITINERARY; } catch { return INITIAL_ITINERARY; }
          });
          const [expenses, setExpenses] = useState(() => {
            try { return JSON.parse(localStorage.getItem('aurora_expenses')) || INITIAL_EXPENSES; } catch { return INITIAL_EXPENSES; }
          });

          // --- State: 編輯 ---
          const [editingDay, setEditingDay] = useState(null); // 正在編輯哪一天的 Header
          const [editingActivity, setEditingActivity] = useState(null); // 正在編輯哪個活動 { dayId, activity }
          const [isAddingActivity, setIsAddingActivity] = useState(false); // 是否為新增模式
          const [showAddExpense, setShowAddExpense] = useState(false);
          
          // Form State for Modals
          const [dayForm, setDayForm] = useState({});
          const [activityForm, setActivityForm] = useState({});
          const [expenseForm, setExpenseForm] = useState({ item: '', amount: '', category: '餐飲', currency: 'USD' });

          const [exchangeRate, setExchangeRate] = useState(32.5);

          // --- Persist ---
          useEffect(() => { localStorage.setItem('aurora_itinerary', JSON.stringify(itinerary)); }, [itinerary]);
          useEffect(() => { localStorage.setItem('aurora_expenses', JSON.stringify(expenses)); }, [expenses]);

          // --- Actions: Weather ---
          const fetchWeather = () => {
            setItinerary(prev => prev.map(day => {
              const types = ['snow', 'clear', 'cloudy', 'snow', 'clear'];
              const type = types[Math.floor(Math.random() * types.length)];
              const temp = Math.floor(Math.random() * 10) - 15;
              return { ...day, weather: { type, temp } };
            }));
            alert("已模擬更新當地天氣資訊！");
          };

          // --- Actions: Day Editing ---
          const openDayEdit = (day) => {
            setDayForm({ ...day });
            setEditingDay(day.id);
          };
          
          const saveDay = () => {
            setItinerary(prev => prev.map(d => d.id === editingDay ? { ...d, ...dayForm } : d));
            setEditingDay(null);
          };

          // --- Actions: Activity Editing ---
          const openActivityEdit = (dayId, activity = null) => {
            if (activity) {
              setActivityForm({ ...activity });
              setIsAddingActivity(false);
            } else {
              setActivityForm({ id: Date.now().toString(), time: '09:00', title: '', note: '', type: 'sightseeing' });
              setIsAddingActivity(true);
            }
            setEditingActivity({ dayId });
          };

          const saveActivity = () => {
            const { dayId } = editingActivity;
            setItinerary(prev => prev.map(d => {
              if (d.id !== dayId) return d;
              
              let newActivities;
              if (isAddingActivity) {
                newActivities = [...d.activities, activityForm];
              } else {
                newActivities = d.activities.map(a => a.id === activityForm.id ? activityForm : a);
              }
              // Sort by time
              newActivities.sort((a, b) => a.time.localeCompare(b.time));
              return { ...d, activities: newActivities };
            }));
            setEditingActivity(null);
          };

          const deleteActivity = () => {
            if (confirm('確定要刪除這個行程嗎？')) {
              const { dayId } = editingActivity;
              setItinerary(prev => prev.map(d => {
                if (d.id !== dayId) return d;
                return { ...d, activities: d.activities.filter(a => a.id !== activityForm.id) };
              }));
              setEditingActivity(null);
            }
          };

          // --- Actions: Expense ---
          const saveExpense = () => {
            if (!expenseForm.item || !expenseForm.amount) return;
            setExpenses(prev => [...prev, { ...expenseForm, id: Date.now(), amount: parseFloat(expenseForm.amount), date: new Date().toISOString().split('T')[0] }]);
            setExpenseForm({ item: '', amount: '', category: '餐飲', currency: 'USD' });
            setShowAddExpense(false);
          };

          const deleteExpense = (id) => {
            if(confirm('刪除此筆費用?')) setExpenses(prev => prev.filter(e => e.id !== id));
          };

          // --- Render Helpers ---
          const WeatherIcon = ({ type }) => {
            const icons = {
              snow: <CloudSnow className="w-6 h-6 text-blue-300" />,
              clear: <Sun className="w-6 h-6 text-yellow-400" />,
              cloudy: <CloudSun className="w-6 h-6 text-gray-400" />,
              rain: <CloudRain className="w-6 h-6 text-blue-400" />
            };
            return icons[type] || <div className="text-xs text-gray-400">天氣?</div>;
          };

          const totalExpenseUSD = expenses.filter(e => e.currency === 'USD').reduce((sum, e) => sum + e.amount, 0);
          const totalExpenseTWD = totalExpenseUSD * exchangeRate;

          return (
            <div className="max-w-md mx-auto bg-gray-50 h-full flex flex-col font-sans relative shadow-2xl">
              
              {/* Header */}
              <div className="bg-white px-4 py-3 shrink-0 border-b border-gray-200 flex flex-col justify-end pt-safe-top z-20">
                <h1 className="text-xl font-black text-center text-slate-800 tracking-tight">AURORA TRIP 2026</h1>
                <p className="text-center text-xs text-slate-400 font-medium">Alaska, Fairbanks</p>
              </div>

              {/* Scrollable Content */}
              <div className="flex-1 overflow-y-auto overscroll-contain no-scrollbar relative z-10 bg-gray-50">
                
                {/* --- Tab: 行程 --- */}
                {activeTab === 'itinerary' && (
                  <div className="space-y-6 pb-24 pt-4 px-4">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-xl font-bold text-gray-800 flex items-center gap-2">
                        <Calendar className="w-5 h-5" /> 逐日行程
                      </h2>
                      <button onClick={fetchWeather} className="bg-blue-100 text-blue-600 px-3 py-1.5 rounded-full text-sm font-medium flex items-center gap-1 hover:bg-blue-200 transition">
                        <CloudSun className="w-4 h-4" /> 更新天氣
                      </button>
                    </div>

                    {itinerary.map((day) => (
                      <div key={day.id} className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6">
                        {/* Day Header */}
                        <div className="bg-slate-50 p-4 border-b border-gray-100 flex justify-between items-start">
                          <div className="flex-1">
                            <div className="flex items-center gap-2 mb-1">
                              <span className="font-bold text-lg text-slate-700">{day.date}</span>
                              <span className="text-xs bg-slate-200 text-slate-600 px-1.5 py-0.5 rounded">週{day.dayOfWeek}</span>
                            </div>
                            <div className="text-sm text-gray-500 flex items-center gap-1">
                              <MapPin className="w-3 h-3" /> {day.location}
                            </div>
                          </div>
                          <div className="flex flex-col items-end gap-2">
                             <div className="flex flex-col items-center justify-center bg-white px-2 py-1 rounded-lg border border-gray-100 min-w-[60px]">
                                {day.weather ? <><WeatherIcon type={day.weather.type} /><span className="text-xs font-bold text-slate-600">{day.weather.temp}°C</span></> : <span className="text-[10px] text-gray-400">尚無天氣</span>}
                             </div>
                             <button onClick={() => openDayEdit(day)} className="text-xs text-blue-500 flex items-center gap-1 px-2 py-1 rounded hover:bg-blue-50">
                               <Edit2 className="w-3 h-3" /> 編輯
                             </button>
                          </div>
                        </div>

                        {/* Logistics */}
                        <div className="px-4 py-3 bg-blue-50/30 flex flex-wrap gap-3 text-sm text-gray-600 border-b border-gray-100">
                           {day.accommodation && <div className="flex items-center gap-1.5"><Hotel className="w-4 h-4 text-blue-500" /><span>{day.accommodation}</span></div>}
                           {day.transport && <div className="flex items-center gap-1.5"><Car className="w-4 h-4 text-green-500" /><span>{day.transport}</span></div>}
                           {!day.accommodation && !day.transport && <span className="text-xs text-gray-400 italic">點擊編輯加入住宿與交通...</span>}
                        </div>

                        {/* Timeline */}
                        <div className="p-4 space-y-4 relative">
                          <div className="absolute left-[27px] top-4 bottom-12 w-0.5 bg-gray-200"></div>
                          
                          {/* Activities */}
                          {day.activities.map((act) => (
                            <div 
                              key={act.id} 
                              onClick={() => openActivityEdit(day.id, act)}
                              className="relative flex items-start gap-4 group cursor-pointer active:scale-[0.98] transition-transform"
                            >
                              <div className="z-10 bg-white border-2 border-blue-500 text-blue-600 text-xs font-bold rounded-full w-14 h-6 flex items-center justify-center shrink-0 shadow-sm group-hover:bg-blue-50">
                                {act.time}
                              </div>
                              <div className={`flex-1 p-3 rounded-lg text-sm border ${act.type === 'highlight' ? 'bg-indigo-50 border-indigo-100' : 'bg-gray-50 border-transparent hover:border-gray-200'} transition-colors`}>
                                <div className="font-semibold text-gray-800 flex justify-between items-center">
                                  <span>{act.title}</span>
                                  {act.type === 'highlight' && <span className="text-[10px] text-indigo-500 font-bold bg-white px-1 rounded border border-indigo-200">★ 重點</span>}
                                </div>
                                {act.note && <div className="text-gray-500 mt-1 text-xs leading-relaxed">{act.note}</div>}
                              </div>
                            </div>
                          ))}

                          {/* Add Activity Button */}
                          <button 
                            onClick={() => openActivityEdit(day.id)}
                            className="relative flex items-center gap-4 w-full group py-2"
                          >
                            <div className="z-10 bg-gray-100 text-gray-400 rounded-full w-14 h-6 flex items-center justify-center shrink-0 border border-gray-200 group-hover:bg-blue-100 group-hover:text-blue-500 transition-colors">
                              <Plus className="w-4 h-4" />
                            </div>
                            <div className="text-xs text-gray-400 font-medium group-hover:text-blue-500">新增行程...</div>
                          </button>
                        </div>
                      </div>
                    ))}
                    
                    {/* Add Day Button (Optional - could implement later) */}
                    <div className="text-center py-4 text-gray-400 text-sm">
                       -- 行程結束 --
                    </div>
                  </div>
                )}

                {/* --- Tab: 預算 --- */}
                {activeTab === 'budget' && (
                  <div className="space-y-6 pb-24 pt-4 px-4">
                    <div className="bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden">
                       <div className="absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-10 -mt-10 blur-xl"></div>
                       <h2 className="text-emerald-100 text-sm font-medium mb-1">總預估花費 (USD)</h2>
                       <div className="text-4xl font-bold mb-2 tracking-tight">${totalExpenseUSD.toLocaleString()}</div>
                       <div className="text-emerald-100 text-sm flex items-center gap-2"><span className="bg-white/20 px-2 py-0.5 rounded text-xs">TWD</span> {totalExpenseTWD.toLocaleString()}</div>
                    </div>

                    <div className="flex justify-between items-center">
                      <h3 className="font-bold text-gray-700">支出明細</h3>
                      <button onClick={() => setShowAddExpense(true)} className="text-sm bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full font-medium hover:bg-emerald-200 flex items-center gap-1">
                        <Plus className="w-3 h-3" /> 新增
                      </button>
                    </div>

                    <div className="space-y-3">
                      {expenses.map((expense) => (
                        <div key={expense.id} className="flex justify-between items-center bg-white p-3 rounded-lg border border-gray-100 shadow-sm relative group">
                          <div className="flex items-center gap-3">
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${expense.category === '住宿' ? 'bg-purple-100 text-purple-500' : expense.category === '交通' ? 'bg-blue-100 text-blue-500' : 'bg-orange-100 text-orange-500'}`}><DollarSign className="w-5 h-5" /></div>
                            <div className="min-w-0"><div className="font-medium text-gray-800 truncate">{expense.item}</div><div className="text-xs text-gray-400">{expense.date} · {expense.category}</div></div>
                          </div>
                          <div className="flex items-center gap-3">
                             <div className="font-bold text-gray-700 whitespace-nowrap">{expense.currency} {expense.amount}</div>
                             <button onClick={() => deleteExpense(expense.id)} className="text-gray-300 hover:text-red-500 p-1"><Trash2 className="w-4 h-4" /></button>
                          </div>
                        </div>
                      ))}
                      {expenses.length === 0 && <div className="text-center text-gray-400 py-8 text-sm">尚未新增任何費用</div>}
                    </div>
                  </div>
                )}
              </div>

              {/* Bottom Navigation */}
              <div className="shrink-0 bg-white border-t border-gray-200 px-6 py-2 pb-safe-bottom flex justify-around items-center z-30">
                <button onClick={() => setActiveTab('itinerary')} className={`flex flex-col items-center gap-1 p-2 rounded-lg transition active:scale-95 ${activeTab === 'itinerary' ? 'text-blue-600' : 'text-gray-400'}`}>
                  <Navigation className="w-6 h-6" /><span className="text-[10px] font-bold">行程</span>
                </button>
                <button onClick={() => setActiveTab('budget')} className={`flex flex-col items-center gap-1 p-2 rounded-lg transition active:scale-95 ${activeTab === 'budget' ? 'text-emerald-600' : 'text-gray-400'}`}>
                  <DollarSign className="w-6 h-6" /><span className="text-[10px] font-bold">預算</span>
                </button>
              </div>

              {/* --- Modals --- */}
              
              {/* Day Edit Modal */}
              <Modal isOpen={!!editingDay} onClose={() => setEditingDay(null)} title="編輯每日資訊">
                <div className="space-y-4">
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">日期</label>
                    <input type="text" className="w-full border rounded-lg p-3 bg-gray-50" value={dayForm.date || ''} onChange={e => setDayForm({...dayForm, date: e.target.value})} />
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">地點</label>
                    <input type="text" className="w-full border rounded-lg p-3 bg-gray-50" value={dayForm.location || ''} onChange={e => setDayForm({...dayForm, location: e.target.value})} />
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">住宿</label>
                    <input type="text" className="w-full border rounded-lg p-3 bg-gray-50" value={dayForm.accommodation || ''} onChange={e => setDayForm({...dayForm, accommodation: e.target.value})} placeholder="例如: Minnie Street B&B" />
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">交通</label>
                    <input type="text" className="w-full border rounded-lg p-3 bg-gray-50" value={dayForm.transport || ''} onChange={e => setDayForm({...dayForm, transport: e.target.value})} placeholder="例如: 租車" />
                  </div>
                  <button onClick={saveDay} className="w-full bg-blue-600 text-white py-3 rounded-xl font-bold mt-2 shadow-lg shadow-blue-200 active:scale-[0.98]">儲存變更</button>
                </div>
              </Modal>

              {/* Activity Edit Modal */}
              <Modal isOpen={!!editingActivity} onClose={() => setEditingActivity(null)} title={isAddingActivity ? "新增行程" : "編輯行程"}>
                <div className="space-y-4">
                  <div className="grid grid-cols-3 gap-3">
                     <div className="col-span-1">
                        <label className="block text-xs font-bold text-gray-500 mb-1">時間</label>
                        <input type="time" className="w-full border rounded-lg p-3 bg-gray-50 text-center" value={activityForm.time || ''} onChange={e => setActivityForm({...activityForm, time: e.target.value})} />
                     </div>
                     <div className="col-span-2">
                        <label className="block text-xs font-bold text-gray-500 mb-1">類型</label>
                        <select className="w-full border rounded-lg p-3 bg-gray-50" value={activityForm.type || 'sightseeing'} onChange={e => setActivityForm({...activityForm, type: e.target.value})}>
                          <option value="sightseeing">觀光 (Sightseeing)</option>
                          <option value="food">餐飲 (Food)</option>
                          <option value="transport">交通 (Transport)</option>
                          <option value="highlight">★ 重點 (Highlight)</option>
                          <option value="activity">活動 (Activity)</option>
                        </select>
                     </div>
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">標題</label>
                    <input type="text" className="w-full border rounded-lg p-3 bg-gray-50" placeholder="要做什麼?" value={activityForm.title || ''} onChange={e => setActivityForm({...activityForm, title: e.target.value})} />
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">備註</label>
                    <textarea rows="3" className="w-full border rounded-lg p-3 bg-gray-50" placeholder="詳細資訊、門票價格..." value={activityForm.note || ''} onChange={e => setActivityForm({...activityForm, note: e.target.value})}></textarea>
                  </div>
                  
                  <div className="flex gap-3 pt-2">
                    {!isAddingActivity && (
                      <button onClick={deleteActivity} className="flex-1 bg-red-50 text-red-500 py-3 rounded-xl font-bold active:scale-[0.98]">刪除</button>
                    )}
                    <button onClick={saveActivity} className="flex-[2] bg-blue-600 text-white py-3 rounded-xl font-bold shadow-lg shadow-blue-200 active:scale-[0.98]">
                      {isAddingActivity ? '確認新增' : '儲存變更'}
                    </button>
                  </div>
                </div>
              </Modal>

              {/* Expense Add Modal */}
              <Modal isOpen={showAddExpense} onClose={() => setShowAddExpense(false)} title="新增費用">
                <div className="space-y-4">
                  <div className="grid grid-cols-2 gap-3">
                     <div>
                        <label className="block text-xs font-bold text-gray-500 mb-1">金額</label>
                        <input type="number" className="w-full border rounded-lg p-3 bg-gray-50" placeholder="0.00" value={expenseForm.amount} onChange={e => setExpenseForm({...expenseForm, amount: e.target.value})} />
                     </div>
                     <div>
                        <label className="block text-xs font-bold text-gray-500 mb-1">幣別</label>
                        <select className="w-full border rounded-lg p-3 bg-gray-50" value={expenseForm.currency} onChange={e => setExpenseForm({...expenseForm, currency: e.target.value})}>
                           <option value="USD">USD</option>
                           <option value="TWD">TWD</option>
                        </select>
                     </div>
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">項目名稱</label>
                    <input type="text" className="w-full border rounded-lg p-3 bg-gray-50" placeholder="例如: 晚餐" value={expenseForm.item} onChange={e => setExpenseForm({...expenseForm, item: e.target.value})} />
                  </div>
                  <div>
                    <label className="block text-xs font-bold text-gray-500 mb-1">分類</label>
                    <div className="grid grid-cols-3 gap-2">
                      {['餐飲', '住宿', '交通', '票券', '購物', '其他'].map(cat => (
                        <button 
                          key={cat}
                          onClick={() => setExpenseForm({...expenseForm, category: cat})}
                          className={`py-2 rounded-lg text-sm font-medium transition ${expenseForm.category === cat ? 'bg-emerald-500 text-white shadow-md' : 'bg-gray-100 text-gray-500'}`}
                        >
                          {cat}
                        </button>
                      ))}
                    </div>
                  </div>
                  <button onClick={saveExpense} className="w-full bg-emerald-600 text-white py-3 rounded-xl font-bold mt-2 shadow-lg shadow-emerald-200 active:scale-[0.98]">新增費用</button>
                </div>
              </Modal>

            </div>
          );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<TravelPlanner />);
    </script>
</body>
</html>